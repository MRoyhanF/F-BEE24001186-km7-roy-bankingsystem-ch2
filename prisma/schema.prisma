generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model profile {
  id        Int      @id @default(autoincrement())
  identity_type      String
  identity_number     Int
  user      User?    @relation(fields: [user_id], references: [id])
  user_id   Int
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  password  String
  profile   profile[]
  bank_account bank_account[]
}

model bank_account {
  id                      Int           @id @default(autoincrement())
  bank_name               String
  bank_account_number      Int
  balance                 Int
  user                    User?         @relation(fields: [user_id], references: [id])
  user_id                 Int
  outgoing_transactions   transaction[] @relation("sourceAccount")
  incoming_transactions   transaction[] @relation("destinationAccount")
}

model transaction {
  id                    Int           @id @default(autoincrement())
  source_account        bank_account? @relation("sourceAccount", fields: [source_account_id], references: [id])
  destination_account   bank_account? @relation("destinationAccount", fields: [destination_account_id], references: [id])
  source_account_id     Int
  destination_account_id Int
}

